{% extends parent_template %}

{% block css %}
{{block.super}}
<link href="{{STATIC_PREFIX}}css/ajaxlist.css" rel="stylesheet" />
{% endblock %}

{% block head %}
{{ block.super }}

<script language="javascript">
function filter(sort, page, max, category, query) {
	objects_url = "{{ objects_url }}"

	parameters = {"sort" : sort, "page" : page, "max" : max, "category" : category, "query" : query};
	
	$.get("{{ objects_url }}", parameters, function(data, textStatus) {
		$("#ajaxlist_container").html(data);
	});
	return false;
}

function queryOnEnter(e, sort, page, max, category) {
	var keycode;
	if (window.event) keycode = window.event.keyCode;
	else if (e) keycode = e.which;
	else return true;
	if (keycode == 13) {
		element = e.srcElement || e.target
		filter(sort, page, max, category, element.value);
		return false;
	}
	return true;
}

function toggleOptionsDiv(options_div, img_div) {
	var options = document.getElementById(options_div);
	var toggle_img = document.getElementById(img_div);	
	if ( options.style.display != 'none' ) {
		options.style.display = 'none';
		toggle_img.src = "{{STATIC_PREFIX}}images/site/plus.gif";
	} else {
		options.style.display = '';
		toggle_img.src = "{{STATIC_PREFIX}}images/site/minus.gif";		
	}
}

{% if extra_javascript %}
{% include extra_javascript %}
{% endif %}
</script>
{% endblock %}


{% block content %}
{{ block.super }}
{{ extra_body }}
<div id="ajaxlist_container"> {% if view_template %} {% include view_template %} {% else %}{% include "ajaxlist/_objects_view.html" %} {% endif %}</div>
{% endblock %}
