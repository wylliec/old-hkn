{% extends "tutor/base.html" %}

{% block title %} {{ block.super }} - Schedule {% endblock %}

{% block subtitle %} Tutoring - {{ season }} {{ year }} Schedule {% endblock %}

{% block tutorcontent %}

{% if not message %}
<script type="text/javascript">
<!--
var color = "#6f6";
var colorcur = "#fb6";

var locked = false;
var tutoringcss = document.createElement('style');
tutoringcss.type = 'text/css';
tutoringcss.rel = 'stylesheet';
document.getElementsByTagName("head")[0].appendChild(tutoringcss);

// Highlight using these funky colors.
function highlight(className) {
	if(!locked) tutoringcss.innerHTML = '.' + className + 'cur { background: ' + colorcur + ' !important; }' +
				'.' + className + ' { background: ' + color + ' !important; }';
}

// Get rid of the css.
function unhighlight(className){
	if(!locked) tutoringcss.innerHTML = "";
}

// Highlight and stay highlighted until we click something else.
// If you do click a different class, highlight it instead of clearing.
function locklight(className){
	if (!locked){
		highlight(className);
		locked = className;
	}
	else if(locked != className){
		locked = false;
		highlight(className);
		locked = className;
	}
	else{
		locked = false;
		highlight(className);
	}

	return false;
}
//-->
</script>
<div style="float: left; width: 80%; text-align: center">
	{% for officeinfo in info %}
	<h3>
		{{ officeinfo.header }}
	</h3>
	<table style="width: 100%">
		<tr>
			<th>
			</th>
			{% for day in days %}
			<th>
				{{ day }}
			</th>
			{% endfor %}
		</tr>
		{% for scheduleRow in officeinfo.schedule %}
		<tr>
			<td class="time">
				{{ scheduleRow.timeslot }}
			</td>
			{% for dayinfo in scheduleRow.row %}
			<td style="width: 18%; background-color: #dddddd; padding: 3px">
				{% for person in dayinfo %}
				<div class="person {{ person.classes }}" style="margin-top: 3px; margin-bottom: 3px">
					{{ person.name }}
				</div>
				{% endfor %}
			{% endfor %}
		</tr>
		{% endfor %}
	</table>
	{% endfor %}
</div>

<div style="float: left; max-width: 20%">
	{% for data in canTutor|dictsort:"dept" %}
	<div>
		<div style="font-weight: bold">
			{{ data.dept }}
		</div>
		{% for course in data.courses %}
		<a href="#" class="{{ data.shortdept }}{{ course }}" onmouseover="highlight('{{ data.shortdept }}{{ course }}')" onmouseout="unhighlight('{{ data.shortdept }}{{ course }}')" onclick="return locklight('{{ data.shortdept }}{{ course }}')">{{ course }}</a>
		{% endfor %}
	</div>
	{% endfor %}
</div>
<div style="clear:both">
</div>
{% endif %}

{% endblock %}
